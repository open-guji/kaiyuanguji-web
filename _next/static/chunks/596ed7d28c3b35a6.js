(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},67920,85149,e=>{"use strict";var t=e.i(18050),o=e.i(71645);e.i(47167).default.env.NEXT_PUBLIC_SITE_URL;let i="open-guji",r="https://raw.githubusercontent.com",n=`${r}/${i}/book-index-draft/main/index.json`,s=`${r}/${i}/book-index/main/index.json`,u="og_data_source";e.s(["GITHUB_BASE",0,r,"GITHUB_BOOK_INDEX",0,s,"GITHUB_BOOK_INDEX_DRAFT",0,n,"GITHUB_ORG",0,i,"JSDELIVR_CDN",0,"https://cdn.jsdelivr.net/gh","JSDELIVR_FASTLY",0,"https://fastly.jsdelivr.net/gh","SOURCE_COOKIE_NAME",0,u],85149);let c=(0,o.createContext)(void 0);function a({children:e}){let[i,r]=(0,o.useState)("github"),[n,a]=(0,o.useState)(!1),l=(0,o.useCallback)(e=>{r(e),document.cookie=`${u}=${e}; path=/; max-age=31536000`},[]),d=(0,o.useCallback)(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3);await fetch(s,{method:"HEAD",mode:"no-cors",signal:e.signal}),clearTimeout(t)}catch(e){console.warn("GitHub is inaccessible, switching to Gitee source"),l("gitee"),a(!0)}},[l]);return(0,o.useEffect)(()=>{let e=document.cookie.split("; ").find(e=>e.startsWith(`${u}=`));e?r(e.split("=")[1]):d()},[d]),(0,t.jsx)(c.Provider,{value:{source:i,setSource:l,isAutoDetected:n,checkConnectivity:d},children:e})}function l(){let e=(0,o.useContext)(c);if(void 0===e)throw Error("useSource must be used within a SourceProvider");return e}e.s(["SourceProvider",()=>a,"useSource",()=>l],67920)}]);