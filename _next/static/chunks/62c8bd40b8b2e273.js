(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,o)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},85130,89271,e=>{"use strict";var t,o=((t={}).WORK="work",t.COLLECTION="collection",t.BOOK="book",t);e.s(["BookResourceType",()=>o],89271);var r=e.i(85149);let a={};async function n(e,t){try{let r=await fetch(e,{cache:"no-store",signal:AbortSignal.timeout(5e3)});if(!r.ok)throw Error(`Failed to fetch from ${e}: ${r.statusText}`);let a=await r.json(),n=[],i=(e,o)=>{e&&Object.values(e).forEach(e=>{n.push({id:e.id,name:e.title||e.name,type:o,isDraft:t,rawPath:e.path,author:e.author,collection:e.collection,year:e.year,holder:e.holder})})};return i(a.books,o.BOOK),i(a.collections,o.COLLECTION),i(a.works,o.WORK),n}catch(e){throw e}}async function i(e="github"){if(a[e])return a[e];let t=[],o=async t=>{if("github"===e)return n(t?r.GITHUB_BOOK_INDEX_DRAFT:r.GITHUB_BOOK_INDEX,t);let o=t?"book-index-draft":"book-index",a="main",i=`${r.JSDELIVR_FASTLY}/${r.GITHUB_ORG}/${o}@${a}/index.json`,c=`${r.JSDELIVR_CDN}/${r.GITHUB_ORG}/${o}@${a}/index.json`;try{return await n(i,t)}catch(e){return console.warn("Fastly index fetch failed, trying fallback:",e),await n(c,t)}};try{let e=await o(!0);t.push(...e)}catch(t){console.warn(`Failed to fetch draft index from ${e}:`,t)}try{let e=await o(!1);t.push(...e)}catch(t){console.warn(`Failed to fetch official index from ${e}:`,t)}let c=new Map;t.forEach(e=>{c.set(e.id,e)});let s=Array.from(c.values());return a[e]=s,s}async function c(e,t="github"){return(await i(t)).find(t=>t.id===e)||null}async function s(e,t="github"){if("github"===t){let o=e.isDraft?`${r.GITHUB_BASE}/${r.GITHUB_ORG}/book-index-draft/main`:`${r.GITHUB_BASE}/${r.GITHUB_ORG}/book-index/main`,a=`${o}/${encodeURI(e.rawPath)}`,n=await fetch(a,{cache:"no-store",signal:AbortSignal.timeout(1e4)});if(!n.ok)throw Error(`Failed to fetch book detail from ${t}: ${n.statusText}`);return n.json()}let o=e.isDraft?"book-index-draft":"book-index",a="main",n=`${r.JSDELIVR_FASTLY}/${r.GITHUB_ORG}/${o}@${a}/${encodeURI(e.rawPath)}`,i=`${r.JSDELIVR_CDN}/${r.GITHUB_ORG}/${o}@${a}/${encodeURI(e.rawPath)}`;try{let e=await fetch(n,{cache:"no-store",signal:AbortSignal.timeout(8e3)});if(!e.ok)throw Error(`Fastly status: ${e.status}`);return await e.json()}catch(t){console.warn("Fastly fetch failed, trying fallback CDN:",t);let e=await fetch(i,{cache:"no-store",signal:AbortSignal.timeout(1e4)});if(!e.ok)throw Error(`Failed to fetch book detail from CDN: ${e.statusText}`);return await e.json()}}function l(e){switch(e){case o.WORK:return"作品";case o.COLLECTION:return"丛编";case o.BOOK:return"书";default:return""}}function u(e){return e?"草稿":"正式"}e.s(["fetchAllBooks",()=>i,"fetchBookDetail",()=>s,"findBookById",()=>c,"getStatusLabel",()=>u,"getTypeLabel",()=>l],85130)},81827,e=>{"use strict";var t=e.i(18050),o=e.i(71645),r=e.i(22016),a=e.i(85130),n=e.i(67920),i=e.i(89271);function c({id:e,children:c,className:s,...l}){let{source:u}=(0,n.useSource)(),[d,h]=(0,o.useState)(null),[f,k]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let t=!0;return(async()=>{try{let o=await (0,a.findBookById)(e,u);t&&o&&(h(o.type),k(o.name))}catch(t){console.error(`Failed to fetch book info for ID: ${e}`,t)}})(),()=>{t=!1}},[e,u]),(0,t.jsxs)(r.default,{href:`/book-index/${e}`,className:`inline-flex items-center text-vermilion hover:underline font-medium decoration-dotted underline-offset-4 ${s||""}`,...l,children:[(()=>{let e="w-3.5 h-3.5 inline-block mr-1 opacity-70 align-middle";switch(d){case i.BookResourceType.BOOK:return(0,t.jsx)("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})});case i.BookResourceType.COLLECTION:return(0,t.jsx)("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})});case i.BookResourceType.WORK:return(0,t.jsx)("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});default:return null}})(),(0,t.jsx)("span",{children:f||c||e})]})}e.s(["default",()=>c])}]);